define(["backbone","text!tpl/LoginWithGigDetailsView.html","views/number-of-tickets-view","views/register-with-gig-details-view"],function(e,t,n,r){var i=e.View.extend({tagName:"div",className:"login_with_gig_details",template:_.template(t),events:{"keypress #email_address":"email_address_keypress","keypress #password":"password_keypress","blur #email_address":"email_address_blur","blur #password":"password_blur","click #login":"login","click #register":"register"},initialize:function(){console.log("in initialize() of login-with-gig-details-view.js"),console.dir(this.model)},render:function(){return console.log("in login-with-gig-details-view.js and render()"),this.$el.html(this.template(this.model.toJSON())),this.$email_address=this.$("#email_address"),this.$password=this.$("#password"),this.login_details={},this},email_address_keypress:function(e){console.log("in email_address_keypress");return},password_keypress:function(e){console.log("in password_keypress");return},email_address_blur:function(e){console.log("in email_address_blur"),this.close_input_field(this.$email_address,"email_address");return},password_blur:function(e){console.log("in password_blur"),this.close_input_field(this.$password,"password");return},close_input_field:function(e,t){console.log("in close_input_field"),console.dir(e),console.log("attribute: "+t);var n=e.val().trim();this.login_details[t]=n,console.log("value entered into the attribute, "+t+", is "+n),console.dir(this.login_details);return},login:function(){console.log("in login function");var e=this;$.ajax({url:"/api/users/login",type:"POST",data:e.login_details,success:function(t,r,i){console.log("SUCCESS: POST /api/users/login"),console.dir(t),console.log(r),console.dir(i);if(t.errors)alert("ASSERTION ERROR: invalid user input"),console.log("ASSERTION ERROR: invalid user input"),console.dir(t.errors),e.render();else if(t.user_authenticated){e.current_view=e;var s=new n({model:e.model});e.show_view("#featureContent",s),e.switch_log_button("#logout_header","#login_header"),e.display_account_tab(!0)}else console.log("login failed, try again"),console.dir(t),e.render()},error:function(e,t,n){console.log("ERROR: POST /api/users/login"),console.dir(e),console.log(t),console.dir(n)}})},register:function(){console.log("in register function");var e=this,t=new r({model:e.model});this.show_view("#featureContent",t)},switch_log_button:function(e,t){$(t).css("display","none"),$(e).css("display","block")},show_view:function(e,t){return console.log("in show_view()"),this.current_view&&this.current_view.close(),$(e).html(t.render().el),this.current_view=t,t},display_account_tab:function(e){e?$("#account").css("display","block"):$("#account").css("display","none")}});return i});