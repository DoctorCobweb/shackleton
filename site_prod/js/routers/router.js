define(["backbone","views/gigs-view","views/about-view","views/contact-view","views/login-view","views/home-landing-view","views/gig-detail-view","collections/gigGuide","views/gig-guide-landing-view","models/user-model","views/user-details-view","views/logged-out-view","models/order-model","views/number-of-tickets-view","collections/ordersCollection","views/checkout-view","views/account-view","views/register-view","views/privacy-policy-view","views/returns-policy-view","views/ticket-types-view","views/newsletter-view","views/faq-view","views/search-view"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T=e.Router.extend({initialize:function(){console.log("in initialize() of router.js")},routes:{"":"index",about:"about",login:"login",contact:"contact",gigs:"gig_guide","gigs/:id":"gig_details","users/session/:id":"session",logout:"logout","users/session/goodbye":"goodbye","delete-user-account/:id":"delete_user_account",account:"account",privacy_policy:"privacy_policy",returns_policy:"returns_policy",ticket_types:"ticket_types",newsletter:"newsletter",faq:"faq",search:"search",register:"register"},register:function(){console.log("in register() of router.js"),this.check_authentication_set_links(),this.theRegisterView=new g,this.show_view("#featureContent",this.theRegisterView)},privacy_policy:function(){console.log("in privacy_policy handler"),this.thePrivacyPolicyView||(this.thePrivacyPolicyView=new y),this.show_view("#featureContent",this.thePrivacyPolicyView)},returns_policy:function(){console.log("in returns_policy handler"),this.theReturnsPolicyView||(this.theReturnsPolicyView=new b),this.show_view("#featureContent",this.theReturnsPolicyView)},ticket_types:function(){console.log("in ticket_types handler"),this.theTicketTypesView||(this.theTicketTypesView=new w),this.show_view("#featureContent",this.theTicketTypesView)},newsletter:function(){console.log("in newsletter handler"),this.theNewsletterView||(this.theNewsletterView=new E),this.show_view("#featureContent",this.theNewsletterView)},faq:function(){console.log("in faq handler"),this.theFaqView||(this.theFaqView=new S),this.show_view("#featureContent",this.theFaqView)},search:function(){console.log("in search handler"),this.theSearchView||(this.theSearchView=new x),this.show_view("#featureContent",this.theSearchView)},check_authentication_set_links:function(){console.log("in check_authentication_set_links handler");var e=this;$.ajax({url:"/api/users/session",type:"GET",success:function(t,n,r){t.user_authenticated===!0&&(console.dir(t),console.log("Get response: yuppupupup"),console.log(n),console.dir(r),e.switch_log_button("#logout_header","#login_header"),e.display_account_tab(!0))}})},account:function(){console.log("in account handler"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links();var e=new m;this.show_view("#featureContent",e)},index:function(){console.log("in index() of router.js"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links(),this.theHomeLandingView||(this.theHomeLandingView=new s),this.show_view("#featureContent",this.theHomeLandingView)},about:function(){console.log("in about() of router.js"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links(),this.theAboutView||(this.theAboutView=new n),this.show_view("#featureContent",this.theAboutView)},login:function(){console.log("in login() of router.js"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links();var e=new i;this.show_view("#featureContent",e)},contact:function(){console.log("in contact() of router.js"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links(),this.theContactView||(this.theContactView=new r),this.show_view("#featureContent",this.theContactView)},gig_guide:function(){console.log("in gigGuide() of router.js"),this.is_bootstrap_btn_navbar_visible(),this.check_authentication_set_links(),this.theGigList||(this.theGigList=new u);var e=this;this.theGigList.fetch({success:function(n,r){console.log("self.theGigList.length = "+e.theGigList.length),e.theGigsView=new t({model:e.theGigList}),e.show_view("#featureContent",e.theGigsView),e.requestedId&&(e.navigate("//gigs/"+e.requestedId),e.gigDetails(e.requestedId),e.requestedId=null)},error:function(e,t){console.log("ERROR: in router.js and gigGuide handler")}})},gig_details:function(e){console.log("in getDetails() of router.js, with id = "+e),this.check_authentication_set_links(),this.defaultLandingView&&(console.log("gigDetails() of router.js and this.defaultLandingView is != null"),this.defaultLandingView.close(),this.defaultLandingView=null),this.theGigList?(this.gig=this.theGigList.get(e),this.selectedGigPrice=this.gig.get("price"),this.show_view("#featureContent",new o({model:this.gig}))):(this.requestedId=e,this.gigGuide())},session:function(e){console.log("USER AUTHENTICATED: in session() in router.js"),console.log("USER AUTHENTICATED:id: "+e+" in session() in router.js");if(!this.userDetailsView){this.userModel=new f({_id:e}),console.log("userModel id: "+this.userModel.get("_id"));var t=this;this.userModel.fetch({success:function(e,n,r){console.log("SUCCESS: in session handler. fetched user data from server."),console.dir(e),t.userDetailsView=new l({model:e}),t.navigate("#/hello/"+e.get("first_name"),{replace:!0}),t.show_view("#featureContent",t.userDetailsView),t.switch_log_button("#logout_header","#login_header"),t.display_account_tab(!0)},error:function(e,t,n){console.log("ERROR: in session handler of router.js")}})}},logout:function(){console.log("in logout() route."),this.is_bootstrap_btn_navbar_visible(),this.order&&(console.log("reset this.order to null, since you logged out."),this.order=null);var e=this;$.ajax({url:"/api/users/logout",type:"DELETE",success:function(t,n,r){console.dir(t),console.log("Delete response:"),console.log(n),console.dir(r),e.goodbye(t)}}),this.switch_log_button("#login_header","#logout_header"),this.display_account_tab(!1)},goodbye:function(e){this.loggedOutView||(this.loggedOutView=new c),this.navigate("#/goodbye/"+e,{replace:!0}),this.show_view("#featureContent",this.loggedOutView)},delete_user_account:function(e){console.log("and this.userModel.get('id'): "+this.userModel.get("_id"));var t=this;$.ajax({url:"/api/users/session",type:"GET",success:function(n,r,i){console.dir(n),console.log("Get response:"),console.log(r),console.dir(i),n._id===e&&n.authenticated===!0&&t.userModel&&t.userModel.get("_id")===e?(console.log("in deleteUserAccount handler, self.userModel is defined and self.userModel.get('id'): "+t.userModel.get("_id")+"and self.userModel.get('id') === id (from url param) is true "),t.userModel.destroy({success:function(e,n){console.log("in success callback in self.userModel.destroy()"),console.dir(e),console.log("in success callback,  response:"),console.dir(n),t.logout()},error:function(e,t){console.log("in error callback in self.userModel.destroy()"),console.dir(e),console.log("in error callback,  response:"),console.dir(t)}})):console.log("in deleteUserAccount handler and !this.userModel === true")}})},is_bootstrap_btn_navbar_visible:function(){console.log("in is_bootstrap_btn_navbar_visible handler");var e=$("button.navbar-toggle").css("display");console.log("button.navbar-toggle has css attribute display: "+e),e==="block"&&(console.log("btn-navbar is displayed on page"),this.is_bootstrap_nav_collapse_visible()),e==="none"&&console.log("btn-navbar is NOT displayed on page")},is_bootstrap_nav_collapse_visible:function(){console.log("in is_bootstrap_nav_collapse_visible handler");var e=$("div.navbar-collapse.in").css("display");console.log("div.navbar-collapse.in has css attribute display: "+e),e==="none"&&console.log("div.navbar-collapse.in has display:none on page"),e==="block"&&(console.log("div.navbar-collapse.in has block: "+e),$("div.navbar-collapse.in").removeClass("in"),$("button.navbar-toggle").addClass("collapsed"))},switch_log_button:function(e,t){$(t).css("display","none"),$(e).css("display","block")},display_account_tab:function(e){e?$("#account").css("display","block"):$("#account").css("display","none")},show_view:function(e,t){return console.log("in showView()"),console.log("in showView(), this.currentView: "),console.log(this.currentView),this.currentView&&this.currentView.close(),$(e).html(t.render().el),this.currentView=t,t}});return T});