define(["backbone","text!tpl/AccountView.html","views/account-orders-view","views/account-billing-view","views/account-settings-view","collections/ordersCollection","views/account-billing-default-view","models/user-model"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({tagName:"div",className:"account_details",template:_.template(t),events:{"click #account_orders":"orders","click #account_billing":"billing","click #account_settings":"settings"},initialize:function(){console.log("in initialize() of account-view.js")},render:function(){return console.log("in account-view.js and render()"),this.$el.html(this.template()),this},orders:function(){console.log("in orders handler");var e=this;this.orders_collection||(this.orders_collection=new s),this.orders_collection.fetch({success:function(t,r){console.log("SUCCESS in fetching the orders collection"),console.dir(t),console.log(r);var i=new n({model:t});e.show_view("#account_main",i)},error:function(e,t){console.log("ERROR in fetching the orders collection"),console.dir(e),console.log(t)}})},billing:function(){console.log("in billing handler");var e=this;$.ajax({url:"/api/users/account/billing_info/",type:"GET",success:function(t,n,i){console.log("SUCCESS: got billing info"),console.dir(t),console.log(n),console.dir(i);if(t.error){var s=new o;e.show_view("#account_main",s)}else{var u=new r({billing_data:t});e.show_view("#account_main",u)}},error:function(e,t,n){console.log("ERROR: could not got billing info"),console.dir(e),console.log(t),console.dir(n)}})},settings:function(){console.log("in settingshandler");var e=this;$.ajax({url:"/api/users/settings/user",type:"GET",success:function(t,n,r){console.log("SUCCESS: got user _id"),console.dir(t),console.log(n),console.dir(r),e.user||(e.user=new u({_id:t})),e.user.fetch({success:function(t,n,r){console.log("SUCCESS: got user info"),console.dir(t),console.log(n),console.dir(r);var s=new i({model:t});e.show_view("#account_main",s)},error:function(e,t,n){console.log("ERROR: could not get user info"),console.dir(e),console.log(t),console.dir(n)}})},error:function(e,t,n){console.log("ERROR: could not get user _id"),console.dir(e),console.log(t),console.dir(n)}})},show_view:function(e,t){return console.log("in show_view, and this.current_view is: "),console.log(this.current_view),this.current_view&&this.current_view.close(),$(e).html(t.render().el),this.current_view=t,t}});return a});