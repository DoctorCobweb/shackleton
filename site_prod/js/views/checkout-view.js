define(["backbone","text!tpl/CheckoutView.html"],function(e,t){var n=e.View.extend({tagName:"div",className:"view_checkout_details",template:_.template(t),events:{"click #import_pkpass":"import_pkpass"},initialize:function(){console.log("in initialize() of checkout-view.js"),console.log("window.navigator.userAgent: "+window.navigator.userAgent),this.the_user_agent=this.find_the_user_agent(),console.log("the_user_agent is: "+this.the_user_agent),this.current_view=this},render:function(){return console.log("in checkout-view.js and render()"),this.$el.html(this.template(this.model.toJSON())),this.$("#import_passbook_pass").css("display","block"),this},find_the_user_agent:function(){var e=window.navigator.userAgent,t="";return e.search(/macintosh/i)!==-1&&e.search(/chrome/i)!==-1?t="Macintosh/Chrome":e.search(/macintosh/i)!==-1&&e.search(/firefox/i)!==-1?t="Macintosh/Firefox":e.search(/macintosh/i)!==-1&&e.search(/safari/i)!==-1?t="Macintosh/Safari":e.search(/iphone/i)!==-1&&e.search(/chrome/i)!==-1&&e.search(/mobile/i)!==-1?t="iPhone/Chrome/Mobile":e.search(/iphone/i)!==-1&&e.search(/firefox/i)!==-1&&e.search(/mobile/i)!==-1?t="iPhone/Firefox/Mobile":e.search(/iphone/i)!==-1&&e.search(/safari/i)!==-1&&e.search(/mobile/i)!==-1?t="iPhone/Safari/Mobile":e.search(/ipad/i)!==-1&&e.search(/chrome/i)!==-1&&e.search(/mobile/i)!==-1?t="iPad/Chrome/Mobile":e.search(/ipad/i)!==-1&&e.search(/firefox/i)!==-1&&e.search(/mobile/i)!==-1?t="iPad/Firefox/Mobile":e.search(/ipad/i)!==-1&&e.search(/safari/i)!==-1&&e.search(/mobile/i)!==-1?t="iPad/Safari/Mobile":t="unable_to_determine_user_agent_extracted",t},import_pkpass:function(){console.log("in import_pkpass handler");var e=this,t=e.model.get("gig_id"),n=e.model.get("_id"),r="api/mobile_tickets/pkpass?gig_id="+this.model.get("gig_id")+"&"+"order_id="+this.model.get("_id")+"&"+"order_first_name="+this.model.get("first_name")+"&"+"order_last_name="+this.model.get("last_name")+"&"+"order_main_event="+this.model.get("main_event")+"&"+"order_number_of_tickets="+this.model.get("number_of_tickets")+"&"+"order_transaction_status="+this.model.get("transaction_status");$.ajax({url:r,type:"GET",success:function(e,t,n){console.log("SUCCESS: got pkpass mobile ticket response"),console.dir(e),console.log(t),console.dir(n)},error:function(t,n,r){console.log("ERROR: could not get pkpass mobile ticket response"),console.dir(t),console.log(n),console.dir(r),e.render()}})},show_view:function(e,t){return console.log("in showView()"),console.log("in showView(), this.currentView: "),console.log(this.current_view),this.current_view&&this.current_view.close(),$(e).html(t.render().el),this.current_view=t,t}});return n});